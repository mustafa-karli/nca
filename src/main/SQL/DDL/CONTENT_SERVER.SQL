CREATE TABLE CONTENT_DATA (
  CONTENT_ID           BIGINT        NOT NULL,
  OWNER_ID             INTEGER       NOT NULL,
  ORIGINAL_FILE        VARCHAR(250)  NOT NULL,
  ORIGIN_IP            VARCHAR(32)   NOT NULL,
  MIMETYPE             VARCHAR(20)   NOT NULL,
  USERNAME             VARCHAR(30)   NOT NULL,
  CREATE_TIME          TIMESTAMP     NOT NULL,
  BINDATA              BLOB,
  THUMB                BLOB,
    CONSTRAINT CONTENT_DATA_PK PRIMARY KEY(CONTENT_ID)
);

CREATE INDEX CONTENT_DATA_IND1 ON CONTENT_DATA (OWNER_ID);



CREATE TABLE CONTENT_RELATION (
  OBJECT_TYPE          CHAR(2)       NOT NULL,
  OBJECT_ID            INTEGER       NOT NULL,
  CONTENT_ID           BIGINT        NOT NULL,
  OWNER_ID             INTEGER       NOT NULL,
  CAPTION              VARCHAR(80)   NOT NULL,
  PURPOSE              VARCHAR(20)   NOT NULL,
  PRIORITY             SMALLINT      NOT NULL,
  USERNAME             VARCHAR(30)   NOT NULL,
  CREATE_TIME          TIMESTAMP     NOT NULL,
    CONSTRAINT CONTENT_RELATION_PK PRIMARY KEY(OBJECT_TYPE, OBJECT_ID, CONTENT_ID),
    CONSTRAINT CONTENT_RELATIONS   FOREIGN KEY(CONTENT_ID) REFERENCES CONTENT_DATA(CONTENT_ID) ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE INDEX CONTENT_RELATION_IND1 ON CONTENT_RELATION (CONTENT_ID);
CREATE INDEX CONTENT_RELATION_IND2 ON CONTENT_RELATION (OWNER_ID);
